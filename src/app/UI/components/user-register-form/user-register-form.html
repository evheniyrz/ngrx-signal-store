<form [formGroup]="registerForm" (ngSubmit)="createUser()">
    <mat-form-field>
        <mat-label>Enter your NikName</mat-label>
        <input matInput type="text" formControlName="nikName" [errorStateMatcher]="matcher">
        @if(registerForm.controls.nikName.hasError('required')) {
            <mat-error>This field is required</mat-error>
        }
        @if(registerForm.controls.nikName.hasError('maxlength')) {
            <mat-error>Nik Name should be max length 8 symbols</mat-error>
        }
        @if(registerForm.controls.nikName.hasError('minlength') && !registerForm.controls.nikName.hasError('required')) {
            <mat-error>Nik Name should be min length 3 symbols</mat-error>
        }
    </mat-form-field>
    <mat-form-field>
        <mat-label>Select Avatar</mat-label>
        <mat-select formControlName="avatar"  [errorStateMatcher]="matcher">
            <mat-select-trigger>                
                <div class="avatar-container">
                    <img [src]="registerForm.controls.avatar.value.url" [alt]="registerForm.controls.avatar.value.name" width="30" height="30">
                    <span class="description">{{registerForm.controls.avatar.value.name}}</span>
                </div>

              </mat-select-trigger>
            @for(avatar of avatarSource; track avatar.url){
            <mat-option [value]="avatar">
                <div class="avatar-container">
                    <img [src]="avatar.url" [alt]="avatar.name" width="30" height="30">
                    <span class="description">{{avatar.name}}</span>
                </div>
            </mat-option>
          }
        </mat-select>
        @if(registerForm.controls.nikName.hasError('required')) {
            <mat-error>This field is required</mat-error>
        }
      </mat-form-field>
   <button type="submit" mat-raised-button color="warn" >CREATE USER</button>
</form>

<pre>{{store.user()}}</pre>
